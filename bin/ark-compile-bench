#!/bin/zsh
set -eu

cd ark
hyperfine --export-markdown compile-ark.md --warmup 0 --runs=1 --setup 'cargo fetch' --prepare 'cargo clean' \
    'cargo check' \
    'cargo clippy' \
    'cargo build -r' \
    'cargo build -r -p ark-client'
cd ..

cd ark-modules
hyperfine --export-markdown compile-ark-mods.md --warmup 0 --runs=1 --setup 'cargo fetch' --prepare 'cargo clean' \
    'cargo check' \
    'cargo clippy' \
    'cargo build -r' \
    './mbark build'
